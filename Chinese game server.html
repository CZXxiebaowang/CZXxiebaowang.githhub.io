<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>汉语网络用语消消乐</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #fef9e7; /* 奶白色背景 */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            width: 100%;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            width: 100%;
        }
        
        h1 {
            font-size: 3rem;
            color: #e74c3c;
            text-shadow: 3px 3px 5px rgba(0, 0, 0, 0.2);
            margin-bottom: 10px;
        }
        
        .timer {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
        }
        
        .game-container {
            width: 100%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .bubbles-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .bubble {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            text-align: center;
            cursor: pointer;
            user-select: none;
            padding: 10px;
            box-shadow: 
                inset 0 -8px 10px rgba(0, 0, 0, 0.2),
                inset 0 8px 10px rgba(255, 255, 255, 0.5),
                0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .bubble::after {
            content: '';
            position: absolute;
            top: -10%;
            left: -10%;
            width: 30%;
            height: 30%;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
        }
        
        .bubble:hover {
            transform: scale(1.05);
        }
        
        .bubble.selected {
            transform: scale(1.1);
            box-shadow: 
                inset 0 -8px 10px rgba(0, 0, 0, 0.2),
                inset 0 8px 10px rgba(255, 255, 255, 0.5),
                0 0 20px 5px rgba(255, 255, 255, 0.8);
        }
        
        .bubble.matched {
            opacity: 0;
            transform: scale(0);
            pointer-events: none;
        }
        
        .result {
            font-size: 2.5rem;
            font-weight: bold;
            color: #27ae60;
            text-align: center;
            margin: 20px 0;
            display: none;
        }
        
        .word-form {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            margin-bottom: 20px;
        }
        
        .word-form h2 {
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        .restart-btn {
            background-color: #2ecc71;
            margin-top: 20px;
        }
        
        .restart-btn:hover {
            background-color: #27ae60;
        }
        
        .vocabulary-list {
            width: 100%;
            max-width: 600px;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            display: none; /* 默认隐藏 */
            max-height: 400px;
            overflow-y: auto;
        }
        
        .vocabulary-list h2 {
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .vocabulary-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
        }
        
        .vocabulary-item:last-child {
            border-bottom: none;
        }
        
        .hint {
            font-size: 1.2rem;
            color: #e74c3c;
            margin-bottom: 10px;
            text-align: center;
            display: none;
        }
        
        .hidden {
            display: none;
        }
        
        .error-counter {
            font-size: 1.2rem;
            color: #e74c3c;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <header>
        <h1>汉语网络用语消消乐</h1>
        <div class="timer">用时: <span id="time">00:00</span></div>
        <div class="error-counter">连续错误: <span id="errorCount">0</span>/5</div>
    </header>
    
    <div class="game-container">
        <div class="controls">
            <button id="restartBtn" class="restart-btn">重新开始游戏</button>
        </div>
        
        <div class="bubbles-container" id="bubblesContainer">
            <!-- 泡泡将通过JavaScript动态生成 -->
        </div>
        
        <div class="result" id="result">
            <!-- 游戏结果将在这里显示 -->
        </div>
        
        <div class="hint" id="hint">
            连续5次匹配错误，以下是单词列表作为提示：
        </div>
        
        <div class="vocabulary-list" id="vocabularyList">
            <h2>词汇列表</h2>
            <div id="vocabularyItems">
                <!-- 词汇列表将通过JavaScript动态生成 -->
            </div>
        </div>
        
        <div class="word-form" id="wordForm">
            <h2>添加新词汇</h2>
            <div class="form-group">
                <label for="chinese">中文词汇:</label>
                <input type="text" id="chinese" placeholder="输入中文词汇">
            </div>
            <div class="form-group">
                <label for="english">英文释义:</label>
                <input type="text" id="english" placeholder="输入英文释义">
            </div>
            <button id="addWordBtn">添加词汇</button>
        </div>
    </div>
    
    <script>
        // 完整的100个词汇库
        const defaultWords = [
            { chinese: "尊嘟假嘟", english: "For real or not" },
            { chinese: "神金（疯癫）", english: "Crazy / Out of one's mind" },
            { chinese: "补药（不要谐音）", english: "No, thanks / I don't want it" },
            { chinese: "感觉尸体暖暖的", english: "It warms my heart" },
            { chinese: "豹豹猫猫（CP昵称）", english: "Significant other (SO) / Romantic partner" },
            { chinese: "偷感很重", english: "Unattractive / Having a dull vibe" },
            { chinese: "害我莫名其妙笑了一下", english: "It made me laugh for no reason" },
            { chinese: "XX好看，另外一个也是个人", english: "One looks great, and the other is just average" },
            { chinese: "古希腊掌管XX的神", english: "The Greek god of XX (for someone great at XX)" },
            { chinese: "某某硬控我XX秒", english: "Someone held me back for XX seconds" },
            { chinese: "汗流浃背", english: "Breaking a sweat (from awkwardness/nervousness)" },
            { chinese: "癫公癫婆", english: "Crazy people / Lunatics" },
            { chinese: "这么会XX不要命啦？", english: "Are you trying to outdo everyone with how good you are at XX?" },
            { chinese: "锦鲤", english: "Lucky charm / Good luck symbol" },
            { chinese: "杠精", english: "Contrarian / Someone who always argues for the sake of it" },
            { chinese: "确认过眼神", english: "Recognized the right person/vibe with just a look" },
            { chinese: "官宣", english: "Official announcement" },
            { chinese: "土味情话", english: "Cheesy pick-up lines" },
            { chinese: "皮一下", english: "Be playful / Mess around a little" },
            { chinese: "燃烧我的卡路里", english: "Burn my calories (weight-loss slogan)" },
            { chinese: "斑竹", english: "Forum moderator" },
            { chinese: "马甲", english: "Alias / Alternate account" },
            { chinese: "菜鸟", english: "Newbie / Novice" },
            { chinese: "大虾", english: "Expert / Pro" },
            { chinese: "灌水", english: "Spam (posting meaningless content)" },
            { chinese: "纯净水", english: "Empty post / Totally meaningless comment" },
            { chinese: "水手", english: "Frequent poster" },
            { chinese: "潜水", english: "Lurk (read without commenting)" },
            { chinese: "打铁", english: "Post substantial content" },
            { chinese: "拍砖", english: "Criticize / Offer negative feedback" },
            { chinese: "刷屏", english: "Flood the chat / Spam the feed" },
            { chinese: "扫楼", english: "Reply to every post in a thread" },
            { chinese: "楼主", english: "Thread starter / Original poster (OP)" },
            { chinese: "盖楼", english: "Keep a thread active with replies" },
            { chinese: "楼上的", english: "The person above / Previous poster" },
            { chinese: "几楼的", english: "Which post are you referring to?" },
            { chinese: "沙发", english: "First comment / Top comment" },
            { chinese: "包子", english: "Push-over / Timid person" },
            { chinese: "蛋白质", english: "Idiot / Fool" },
            { chinese: "白骨精", english: "White-collar elite" },
            { chinese: "找抽帖", english: "Troll post (intended to start arguments)" },
            { chinese: "火星帖", english: "Outdated post / Old news" },
            { chinese: "恐龙", english: "Ugly woman (offensive, use cautiously)" },
            { chinese: "维客", english: "Wikipedian" },
            { chinese: "博客", english: "Blogger" },
            { chinese: "黑客", english: "Hacker" },
            { chinese: "红客", english: "Patriotic hacker" },
            { chinese: "朋客", english: "Punk (fan of punk culture)" },
            { chinese: "闪客", english: "Flash animator" },
            { chinese: "极客", english: "Geek (tech enthusiast)" },
            { chinese: "汗", english: "Wow, that's awkward / Embarrassing" },
            { chinese: "倒", english: "Oh my god / Shocking" },
            { chinese: "寒", english: "Creepy / Chilling" },
            { chinese: "抓狂", english: "Lose one's temper / Freak out" },
            { chinese: "踩一脚", english: "Leave a comment / Drop a note" },
            { chinese: "路过", english: "Just passing through / Not interested" },
            { chinese: "闪", english: "Gotta go / Make a quick exit" },
            { chinese: "真香警告", english: "真香 warning (predicting a change of mind)" },
            { chinese: "家里有矿", english: "Loaded / Filthy rich" },
            { chinese: "冲鸭", english: "Let's go / Go for it" },
            { chinese: "安排", english: "Take care of it / Sort it out" },
            { chinese: "社会人", english: "Street-smart person / Savvy person" },
            { chinese: "C位", english: "Center stage / Prime spot" },
            { chinese: "skr", english: "Cool / Dope (slang)" },
            { chinese: "pick", english: "Support / Root for" },
            { chinese: "Lit", english: "Awesome / Amazing (slang)" },
            { chinese: "Deadass", english: "Seriously / For real (slang)" },
            { chinese: "冤种", english: "Sucker / Unlucky person" },
            { chinese: "你个老6", english: "You sneaky guy / You crafty one" },
            { chinese: "淦", english: "Damn / Crap (mild swear word)" },
            { chinese: "我太难了", english: "I'm struggling / This is so hard for me" },
            { chinese: "我不要你觉得，我要我觉得", english: "I don't care what you think—I want it my way" },
            { chinese: "柠檬精", english: "Jealous person / Green with envy" },
            { chinese: "海王", english: "Player (someone who dates multiple people)" },
            { chinese: "扩列", english: "Expand one's contact list / Make more friends" },
            { chinese: "u1s1", english: "To be honest / Let's be real" },
            { chinese: "xswl", english: "Laughing my ass off (LMAO)" },
            { chinese: "nbcs", english: "Nobody cares (NBCS)" },
            { chinese: "甩锅", english: "Pass the blame / Shift responsibility" },
            { chinese: "芭比Q了", english: "It's over / We're doomed" },
            { chinese: "yyds", english: "The GOAT (Greatest Of All Time)" },
            { chinese: "emo", english: "Feeling down / In a bad mood" },
            { chinese: "雨女无瓜", english: "None of your business" },
            { chinese: "yygq", english: "Sarcastic / Passive-aggressive" },
            { chinese: "口桀", english: "Evil laugh (e.g., Mwahaha)" },
            { chinese: "轰杀", english: "Wipe out / Destroy completely" },
            { chinese: "废柴", english: "Loser / Good-for-nothing" },
            { chinese: "破天", english: "Break limits / Go beyond expectations" },
            { chinese: "摸鱼", english: "Slack off at work / Shirk responsibility" },
            { chinese: "松弛感", english: "Laid-back vibe / Relaxed state" },
            { chinese: "内卷", english: "Involution (over-competition)" },
            { chinese: "戏精", english: "Drama queen/king" },
            { chinese: "社交牛杂症", english: "Mixed social skills (sometimes outgoing, sometimes shy)" },
            { chinese: "社牛", english: "Social butterfly / Extrovert" },
            { chinese: "社恐", english: "Social anxiety / Introvert" },
            { chinese: "delulu", english: "Delusional (slang)" },
            { chinese: "干饭人", english: "Foodie / Someone who loves eating" },
            { chinese: "尾款人", english: "Person paying the final installment" },
            { chinese: "打工人", english: "Office worker / Salaryman (self-deprecating)" },
            { chinese: "工具人", english: "Doormat / Someone used for others' benefit" }
        ];

        // 游戏状态变量
        let selectedBubbles = [];
        let matchedPairs = 0;
        let startTime = null;
        let timerInterval = null;
        let gameStarted = false;
        let words = [];
        let consecutiveErrors = 0; // 连续错误计数

        // DOM元素
        const bubblesContainer = document.getElementById('bubblesContainer');
        const timeDisplay = document.getElementById('time');
        const resultDisplay = document.getElementById('result');
        const wordForm = document.getElementById('wordForm');
        const vocabularyList = document.getElementById('vocabularyList');
        const vocabularyItems = document.getElementById('vocabularyItems');
        const addWordBtn = document.getElementById('addWordBtn');
        const restartBtn = document.getElementById('restartBtn');
        const chineseInput = document.getElementById('chinese');
        const englishInput = document.getElementById('english');
        const errorCountDisplay = document.getElementById('errorCount');
        const hintDisplay = document.getElementById('hint');

        // 初始化游戏
        function initGame() {
            // 从localStorage加载词汇或使用默认词汇
            loadWords();
            
            // 重置游戏状态
            selectedBubbles = [];
            matchedPairs = 0;
            gameStarted = false;
            consecutiveErrors = 0;
            clearInterval(timerInterval);
            timeDisplay.textContent = '00:00';
            resultDisplay.style.display = 'none';
            vocabularyList.style.display = 'none';
            hintDisplay.style.display = 'none';
            errorCountDisplay.textContent = '0';
            
            // 清空泡泡容器
            bubblesContainer.innerHTML = '';
            
            // 从完整的词汇库中随机选择5组词汇
            const selectedWords = getRandomWords(5);
            
            // 创建泡泡
            createBubbles(selectedWords);
            
            // 更新词汇列表显示
            updateVocabularyList();
            
            // 检查是否需要隐藏表单
            checkFormVisibility();
        }

        // 从localStorage加载词汇
        function loadWords() {
            const storedWords = localStorage.getItem('matchingGameWords');
            if (storedWords) {
                words = JSON.parse(storedWords);
            } else {
                // 使用完整的100个词汇作为默认词汇库
                words = [...defaultWords];
                saveWords();
            }
        }

        // 保存词汇到localStorage
        function saveWords() {
            localStorage.setItem('matchingGameWords', JSON.stringify(words));
        }

        // 随机选择指定数量的词汇
        function getRandomWords(count) {
            const shuffled = [...words].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        // 创建泡泡
        function createBubbles(selectedWords) {
            const bubbleWords = [];
            
            // 为每个选中的词汇创建中英文泡泡
            selectedWords.forEach(word => {
                bubbleWords.push({
                    text: word.chinese,
                    type: 'chinese',
                    match: word.english
                });
                
                bubbleWords.push({
                    text: word.english,
                    type: 'english',
                    match: word.chinese
                });
            });
            
            // 随机排序泡泡
            const shuffledBubbles = bubbleWords.sort(() => 0.5 - Math.random());
            
            // 创建泡泡元素
            shuffledBubbles.forEach((bubble, index) => {
                const bubbleElement = document.createElement('div');
                bubbleElement.className = 'bubble';
                bubbleElement.textContent = bubble.text;
                bubbleElement.dataset.type = bubble.type;
                bubbleElement.dataset.match = bubble.match;
                bubbleElement.dataset.index = index;
                
                // 生成随机颜色
                const hue = Math.floor(Math.random() * 360);
                bubbleElement.style.backgroundColor = `hsl(${hue}, 70%, 60%)`;
                
                // 添加点击事件
                bubbleElement.addEventListener('click', () => handleBubbleClick(bubbleElement));
                
                bubblesContainer.appendChild(bubbleElement);
            });
        }

        // 处理泡泡点击
        function handleBubbleClick(bubble) {
            // 如果泡泡已匹配或已选中，则忽略点击
            if (bubble.classList.contains('matched') || bubble.classList.contains('selected')) {
                return;
            }
            
            // 播放音效
            playBubbleSound();
            
            // 开始计时（如果是第一次点击）
            if (!gameStarted) {
                startTimer();
                gameStarted = true;
            }
            
            // 添加选中效果
            bubble.classList.add('selected');
            selectedBubbles.push(bubble);
            
            // 如果选中了两个泡泡，检查是否匹配
            if (selectedBubbles.length === 2) {
                checkMatch();
            }
        }

        // 检查两个选中的泡泡是否匹配
        function checkMatch() {
            const [bubble1, bubble2] = selectedBubbles;
            
            // 检查是否匹配（一个是中文，一个是英文，且内容对应）
            const isMatch = 
                bubble1.dataset.type !== bubble2.dataset.type && 
                bubble1.dataset.match === bubble2.textContent;
            
            if (isMatch) {
                // 匹配成功
                setTimeout(() => {
                    bubble1.classList.add('matched');
                    bubble2.classList.add('matched');
                    selectedBubbles = [];
                    matchedPairs++;
                    consecutiveErrors = 0; // 重置错误计数
                    errorCountDisplay.textContent = '0';
                    
                    // 检查游戏是否结束
                    if (matchedPairs === 5) {
                        endGame();
                    }
                }, 500);
            } else {
                // 不匹配
                setTimeout(() => {
                    bubble1.classList.remove('selected');
                    bubble2.classList.remove('selected');
                    selectedBubbles = [];
                    
                    // 增加错误计数
                    consecutiveErrors++;
                    errorCountDisplay.textContent = consecutiveErrors;
                    
                    // 如果连续错误5次，显示单词列表
                    if (consecutiveErrors >= 5) {
                        showVocabularyHint();
                    }
                }, 1000);
            }
        }

        // 显示单词列表提示
        function showVocabularyHint() {
            hintDisplay.style.display = 'block';
            vocabularyList.style.display = 'block';
        }

        // 开始计时
        function startTimer() {
            startTime = new Date();
            timerInterval = setInterval(updateTimer, 1000);
        }

        // 更新计时器
        function updateTimer() {
            const currentTime = new Date();
            const elapsedTime = Math.floor((currentTime - startTime) / 1000);
            const minutes = Math.floor(elapsedTime / 60).toString().padStart(2, '0');
            const seconds = (elapsedTime % 60).toString().padStart(2, '0');
            timeDisplay.textContent = `${minutes}:${seconds}`;
        }

        // 结束游戏
        function endGame() {
            clearInterval(timerInterval);
            resultDisplay.textContent = `恭喜你挑战成功！用时: ${timeDisplay.textContent}`;
            resultDisplay.style.display = 'block';
        }

        // 播放泡泡音效
        function playBubbleSound() {
            // 创建音频元素
            const audio = new Audio();
            // 使用base64编码的简单泡泡音效
            audio.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA";
            audio.play().catch(e => console.log("音效播放失败:", e));
        }

        // 添加新词汇
        function addWord() {
            const chinese = chineseInput.value.trim();
            const english = englishInput.value.trim();
            
            if (chinese && english) {
                words.push({ chinese, english });
                saveWords();
                chineseInput.value = '';
                englishInput.value = '';
                updateVocabularyList();
                checkFormVisibility();
            } else {
                alert('请输入中文和英文内容！');
            }
        }

        // 更新词汇列表显示
        function updateVocabularyList() {
            vocabularyItems.innerHTML = '';
            
            words.forEach((word) => {
                const item = document.createElement('div');
                item.className = 'vocabulary-item';
                item.innerHTML = `
                    <span>${word.chinese}</span>
                    <span>${word.english}</span>
                `;
                vocabularyItems.appendChild(item);
            });
        }

        // 检查表单可见性
        function checkFormVisibility() {
            if (words.length >= 5) {
                wordForm.classList.add('hidden');
            } else {
                wordForm.classList.remove('hidden');
            }
        }

        // 事件监听
        addWordBtn.addEventListener('click', addWord);
        restartBtn.addEventListener('click', initGame);

        // 初始化游戏
        initGame();
    </script>
</body>
</html>